webpackJsonp([5],{"6mXz":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("02xr"),i=a("uxtY"),n=a("OMN4"),s=a.n(n),o=(a("+v9d"),{name:"driverTrip",data:function(){return{routeList:[],routeName:"",workdate:"",statisticsType:"1",plateNum:"",timeTables:[],showMileageDialog:!1,mileageData:{},days:[]}},methods:{_getRouteLis:function(){var t=this;Object(r.r)().then(function(e){e.code==i.b&&(t.routeList=e.result,t.routeName=t.routeList[0])})},queryDriverTrip:function(){var t=this,e={workdate:this.workdate,routeName:this.routeName,statisticsType:this.statisticsType};Object(r.j)(e).then(function(e){e.code==i.b&&(t.timeTables=t.handlerResult(e.result))})},handlerResult:function(t){var e=this.days;t.forEach(function(t){for(var a=0;a<e.length;a++)void 0!=t[e[a].dayStr]&&null!=t[e[a].dayStr]||(t[e[a].dayStr]=0)});var a=t.findIndex(function(t){return"合计"==t.driverName}),r=t[a];return a>-1&&(t.splice(a,1),t.push(r)),t},exportData:function(){var t=this,e=i.c+"/report/down/driver?routeName="+this.routeName+"&workdate="+this.workdate+"&statisticsType="+this.statisticsType;s()({method:"get",url:e,responseType:"blob"}).then(function(e){if(e){var a=window.URL.createObjectURL(e.data),r=document.createElement("a");r.style.display="none",r.href=a;var i=t.routeName+"_司机趟次统计.xlsx";r.setAttribute("download",i),document.body.appendChild(r),r.click()}})},dateChange:function(t){this.createDay()},routeChange:function(t){},createDay:function(){var t=this.workdate.split("-"),e=new Date(parseInt(t[0]),parseInt(t[1]),0).getDate(),a=new Date(parseInt(t[0]),parseInt(t[1])-1,1),r=[];r.push({id:-1,dayStr:"driverName",width:80,day:"司机"});for(var i=0;i<e;i++){var n=a.getDate()+i,s={id:i,width:40,dayStr:"v"+n,day:n+""};r.push(s)}r.push({id:-2,dayStr:"tripCount",width:80,day:"合计"}),this.days=r,this.timeTables=[]}},created:function(){this._getRouteLis()}}),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schedule-wrap"},[a("el-row",{staticClass:"schedule-panel"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{size:"mini",placeholder:"请选择线路"},on:{change:t.routeChange},model:{value:t.routeName,callback:function(e){t.routeName=e},expression:"routeName"}},t._l(t.routeList,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-date-picker",{attrs:{size:"mini",type:"month","value-format":"yyyy-MM",placeholder:"选择月份"},on:{change:t.dateChange},model:{value:t.workdate,callback:function(e){t.workdate=e},expression:"workdate"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.queryDriverTrip}},[t._v("查询")])],1),t._v(" "),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.exportData}},[t._v("导出")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{"max-height":"500",size:"mini",data:t.timeTables,align:"center","highlight-current-row":""}},t._l(t.days,function(t){return a("el-table-column",{key:t.id,attrs:{prop:t.dayStr,label:t.day,width:t.width}})}))],1)],1)},staticRenderFns:[]};var u=a("VU/8")(o,l,!1,function(t){a("Z5F3")},"data-v-a87f02fe",null);e.default=u.exports},Z5F3:function(t,e){}});
//# sourceMappingURL=5.753800f32774be1d5519.js.map