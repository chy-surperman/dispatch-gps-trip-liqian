{"version":3,"sources":["webpack:///src/components/mileageDialog.vue","webpack:///./src/components/mileageDialog.vue?422c","webpack:///./src/components/mileageDialog.vue","webpack:///src/components/mileageRecord.vue","webpack:///./src/components/mileageRecord.vue?8d6f","webpack:///./src/components/mileageRecord.vue"],"names":["type","required","message","trigger","_this","this","result","_this2","define","newValue","_getRouteLis","components_mileageDialog","render","_vm","_h","$createElement","_c","_self","attrs","title","visible","dialogVisible","on","update:visible","$event","close","closeDialog","ref","rules","mileageRules","inline","model","mileageForm","label-width","label","prop","format","placeholder","value","callback","$$v","$set","expression","_v","trim","_l","routeName","key","staticClass","slot","click","saveMileage","staticRenderFns","mileageRecord","mileageDialog","__webpack_require__","normalizeComponent","ssrContext","_getVehicleMileage","workdate","_this3","then","id","index","components_mileageRecord","gutter","span","change","routeChange","value-format","size","queryPlans","staticStyle","width","max-height","data","timeTables","align","highlight-current-row","showMileageDialog","mileage","mileageData","mileageRecord_Component","mileageRecord_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/3.5635ae4efdd27f45ab99.js","sourcesContent":["<template>\r\n\t<el-dialog title=\"添加里程\" :visible.sync=\"dialogVisible\" @close=\"closeDialog\">\r\n\t\t<el-form ref=\"mileageForm\" :rules=\"mileageRules\" :inline=\"true\" :model=\"mileageForm\" label-width=\"100px\">\r\n\t\t\t\r\n\t\t\t\t<el-form-item label=\"起始日期\" prop=\"startTime\">\r\n\t\t\t      \t<el-date-picker\r\n\t\t\t\t      \tv-model=\"mileageForm.startTime\"\r\n\t\t\t\t      \ttype=\"date\"\r\n\t\t\t\t      \tformat=\"yyyy-MM-dd\"\r\n\t\t\t\t      \tplaceholder=\"选择日期\">\r\n\t\t\t\t\t</el-date-picker>\r\n\t\t\t    </el-form-item>\r\n\r\n\t\t\t    <el-form-item label=\"结束日期\" prop=\"endTime\">\r\n\t\t\t      \t<el-date-picker\r\n\t\t\t\t      \tv-model=\"mileageForm.endTime\"\r\n\t\t\t\t      \ttype=\"date\"\r\n\t\t\t\t      \tformat=\"yyyy-MM-dd\"\r\n\t\t\t\t      \tplaceholder=\"选择日期\">\r\n\t\t\t\t\t</el-date-picker>\r\n\t\t\t    </el-form-item>\r\n\r\n\t\t\t    <el-form-item label=\"车辆编号\" prop=\"selfNum\">\r\n\t\t\t\t    <el-input v-model.trim=\"mileageForm.selfNum\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"车牌号\" prop=\"plateNum\">\r\n\t\t\t\t    <el-input v-model.trim=\"mileageForm.plateNum\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\r\n\t\t\t    <el-form-item label=\"营运里程\" prop=\"operationMileage\">\r\n\t\t\t\t    <el-input v-model.trim=\"mileageForm.operationMileage\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"合计里程\" prop=\"mileageTotal\">\r\n\t\t\t\t    <el-input v-model.trim=\"mileageForm.mileageTotal\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"非营运里程\" prop=\"notOperationMileage\">\r\n\t\t\t\t    <el-input v-model.trim=\"mileageForm.notOperationMileage\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"总趟次\" prop=\"tripCount\">\r\n\t\t\t\t    <el-input v-model.trim=\"mileageForm.tripCount\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"线路\" prop=\"routeName\">\r\n\t\t\t\t\t<el-select  v-model=\"mileageForm.routeName\" placeholder=\"请选择线路\">\r\n\t\t\t\t   \t\t<el-option v-for=\"routeName in routeList\" :key=\"routeName\" :label=\"routeName\" :value=\"routeName\"></el-option>\r\n\t\t\t    \t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"单位名称\" prop=\"unit\">\r\n\t\t\t\t    <el-input v-model.trim=\"mileageForm.unit\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t    <el-button @click=\"closeDialog\">取 消</el-button>\r\n\t\t    <el-button type=\"primary\" @click=\"saveMileage('mileageForm')\">确 定</el-button>\r\n\t\t</div>\r\n\t</el-dialog>\r\n</template>\r\n\r\n<script>\r\n\timport {getRouteMsg,addVehicleMileage,updateVehicleMileage} from '@/api/gpsApi'\r\n\timport {formatDate} from '@/common/js/dateFmt.js'\r\n\timport {REQ_SUCCESS,isEnableTiming} from '@/api/APIConstans'\r\n\texport default{\r\n\t\tprops:[\"showMileageDialog\",\"mileage\"],\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tmileageForm:{\r\n\t\t\t\t\tid:'',\r\n\t\t\t\t\tstartTime:'',\r\n\t\t\t\t\tendTime:'',\r\n\t\t\t\t\tstartDate:'',\r\n\t\t\t\t\tendDate:'',\r\n\t\t\t\t\tselfNum:'',\r\n\t\t\t\t\tplateNum:'',\r\n\t\t\t\t\tmileageTotal:'',\r\n\t\t\t\t\toperationMileage:'',\r\n\t\t\t\t\tnotOperationMileage:'',\r\n\t\t\t\t\ttripCount:'',\r\n\t\t\t\t\tunit:'',\r\n\t\t\t\t\trouteName:''\r\n\t\t\t\t},\r\n\t\t\t\trouteList:[],\r\n\t\t\t\tmileageRules:{\r\n\t\t\t\t\tstartTime: [\r\n\t\t\t            { type: 'date', required: true, message: '请选择开始日期', trigger: 'change' }\r\n\t\t\t        ],\r\n\t\t\t        endTime: [\r\n\t\t\t            { type: 'date', required: true, message: '请选择结束日期', trigger: 'change' }\r\n\t\t\t        ],\r\n\t\t\t        selfNum: [\r\n\t\t\t        \t{ required: true, message: '请输入车辆编号', trigger: 'blur' }\r\n\t\t\t        ],\r\n\t\t\t        plateNum: [\r\n\t\t\t        \t{ required: true, message: '请输入车牌号', trigger: 'blur' }\r\n\t\t\t        ],\r\n\t\t\t        operationMileage: [\r\n\t\t\t        \t{ required: true, message: '请输入营运里程', trigger: 'blur' }\r\n\t\t\t        ],\r\n\t\t\t        notOperationMileage: [\r\n\t\t\t        \t{ required: true, message: '请输入非营运里程', trigger: 'blur' }\r\n\t\t\t        ],\r\n\t\t\t        tripCount: [\r\n\t\t\t        \t{ required: true, message: '请输入总趟次', trigger: 'blur' }\r\n\t\t\t        ],\r\n\t\t\t        mileageTotal:[\r\n\t\t\t        \t{ required: true, message: '请输入合计里程', trigger: 'blur' }\r\n\t\t\t        ],\r\n\t\t\t        unit:[\r\n\t\t\t        \t{ required: true, message: '请输入单位名称', trigger: 'blur' }\r\n\t\t\t        ],\r\n\t\t\t        routeName:[\r\n\t\t\t            { required: true, message: '请选择线路', trigger: 'change' }\r\n\t\t\t        ]\r\n\t\t\t\t},\r\n\t\t\t\tdialogVisible:false\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t_getRouteLis(){\r\n\t\t\t\tgetRouteMsg().then(resp => {\r\n\t\t\t\t\tif(resp.code == REQ_SUCCESS){\r\n\t\t\t\t\t\tthis.routeList = resp.result;\r\n\t\t\t\t\t\tthis.routeName = this.routeList[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcloseDialog(){\r\n            \tthis.$emit('closeDialog');\r\n            },\r\n\t\t\tsaveMileage(formName){\r\n\t\t\t\tthis.$refs[formName].validate((valid) => {\r\n\t\t\t        if (valid) {\r\n\t\t\t        \t\r\n\t\t\t        \tthis.mileageForm.startDate = formatDate(this.mileageForm.startTime,\"yyyy-MM-dd\");\r\n\t\t\t            this.mileageForm.endDate = formatDate(this.mileageForm.endTime,\"yyyy-MM-dd\");\r\n\r\n\t\t\t            if(null == this.mileageForm.id || this.mileageForm.id == ''){\r\n\t\t\t            \taddVehicleMileage(this.mileageForm).then(resp => {\r\n\t\t\t            \t\tif(resp.code == REQ_SUCCESS){\r\n\t\t\t\t\t\t\t\t\tthis.$message.success(\"保存成功\");\r\n\t\t\t\t\t\t\t\t\tthis.$emit('closeDialog','success');\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tthis.$message.error(resp.define)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t            \t});\r\n\t\t\t            }else{\r\n\t\t\t            \tupdateVehicleMileage(this.mileageForm).then(resp => {\r\n\t\t\t            \t\t\r\n\t\t\t            \t\tif(resp.code == REQ_SUCCESS){\r\n\t\t\t\t\t\t\t\t\tthis.$message.success(\"保存成功\");\r\n\t\t\t\t\t\t\t\t\tthis.$emit('closeDialog','success');\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tthis.$message.error(resp.define)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t            \t});\r\n\t\t\t            }\r\n\t\t\t        } else {\r\n\t\t\t            console.log('error submit!!');\r\n\t\t\t            return false;\r\n\t\t\t        }\r\n\t\t        });\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch:{\r\n          \tshowMileageDialog(newValue){\r\n              \tthis.dialogVisible = newValue;\r\n              \tthis.mileageForm = {\r\n\t\t\t\t\tid:'',\r\n\t\t\t\t\tstartTime:'',\r\n\t\t\t\t\tendTime:'',\r\n\t\t\t\t\tstartDate:'',\r\n\t\t\t\t\tendDate:'',\r\n\t\t\t\t\tselfNum:'',\r\n\t\t\t\t\tplateNum:'',\r\n\t\t\t\t\tmileageTotal:'',\r\n\t\t\t\t\toperationMileage:'',\r\n\t\t\t\t\tnotOperationMileage:'',\r\n\t\t\t\t\ttripCount:'',\r\n\t\t\t\t\tunit:'',\r\n\t\t\t\t\trouteName:''\r\n\t\t\t\t};\r\n              \tthis._getRouteLis();\r\n          \t},\r\n          \tmileage(newValue){\r\n          \t\tthis.mileageForm = newValue;\r\n          \t\tif(null != newValue){\r\n          \t\t\tlet arr = this.mileageForm.startDate.split(\"-\");\r\n\t         \t\tthis.mileageForm.startTime = new Date(parseInt(arr[0]),parseInt(arr[1]) - 1,parseInt(arr[2]));\r\n\r\n\t         \t\tlet end = this.mileageForm.endDate.split(\"-\");\r\n\t         \t\tthis.mileageForm.endTime = new Date(parseInt(end[0]),parseInt(end[1]) - 1,parseInt(end[2]));\r\n          \t\t}\r\n         \t\t\r\n          \t}\r\n        }\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/mileageDialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":\"添加里程\",\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"close\":_vm.closeDialog}},[_c('el-form',{ref:\"mileageForm\",attrs:{\"rules\":_vm.mileageRules,\"inline\":true,\"model\":_vm.mileageForm,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"起始日期\",\"prop\":\"startTime\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"format\":\"yyyy-MM-dd\",\"placeholder\":\"选择日期\"},model:{value:(_vm.mileageForm.startTime),callback:function ($$v) {_vm.$set(_vm.mileageForm, \"startTime\", $$v)},expression:\"mileageForm.startTime\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"结束日期\",\"prop\":\"endTime\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"format\":\"yyyy-MM-dd\",\"placeholder\":\"选择日期\"},model:{value:(_vm.mileageForm.endTime),callback:function ($$v) {_vm.$set(_vm.mileageForm, \"endTime\", $$v)},expression:\"mileageForm.endTime\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"车辆编号\",\"prop\":\"selfNum\"}},[_c('el-input',{model:{value:(_vm.mileageForm.selfNum),callback:function ($$v) {_vm.$set(_vm.mileageForm, \"selfNum\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"mileageForm.selfNum\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"车牌号\",\"prop\":\"plateNum\"}},[_c('el-input',{model:{value:(_vm.mileageForm.plateNum),callback:function ($$v) {_vm.$set(_vm.mileageForm, \"plateNum\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"mileageForm.plateNum\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"营运里程\",\"prop\":\"operationMileage\"}},[_c('el-input',{model:{value:(_vm.mileageForm.operationMileage),callback:function ($$v) {_vm.$set(_vm.mileageForm, \"operationMileage\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"mileageForm.operationMileage\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"合计里程\",\"prop\":\"mileageTotal\"}},[_c('el-input',{model:{value:(_vm.mileageForm.mileageTotal),callback:function ($$v) {_vm.$set(_vm.mileageForm, \"mileageTotal\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"mileageForm.mileageTotal\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"非营运里程\",\"prop\":\"notOperationMileage\"}},[_c('el-input',{model:{value:(_vm.mileageForm.notOperationMileage),callback:function ($$v) {_vm.$set(_vm.mileageForm, \"notOperationMileage\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"mileageForm.notOperationMileage\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"总趟次\",\"prop\":\"tripCount\"}},[_c('el-input',{model:{value:(_vm.mileageForm.tripCount),callback:function ($$v) {_vm.$set(_vm.mileageForm, \"tripCount\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"mileageForm.tripCount\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"线路\",\"prop\":\"routeName\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择线路\"},model:{value:(_vm.mileageForm.routeName),callback:function ($$v) {_vm.$set(_vm.mileageForm, \"routeName\", $$v)},expression:\"mileageForm.routeName\"}},_vm._l((_vm.routeList),function(routeName){return _c('el-option',{key:routeName,attrs:{\"label\":routeName,\"value\":routeName}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"单位名称\",\"prop\":\"unit\"}},[_c('el-input',{model:{value:(_vm.mileageForm.unit),callback:function ($$v) {_vm.$set(_vm.mileageForm, \"unit\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"mileageForm.unit\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.closeDialog}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.saveMileage('mileageForm')}}},[_vm._v(\"确 定\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-874b9000\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/mileageDialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-874b9000\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./mileageDialog.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./mileageDialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./mileageDialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-874b9000\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./mileageDialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-874b9000\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/mileageDialog.vue\n// module id = null\n// module chunks = ","<template>\r\n\t<div class=\"schedule-wrap\">\r\n\t\t<el-row class=\"schedule-panel\">\r\n\t\t\t<el-row :gutter=\"20\">\r\n\t\t\t\t<el-col :span=\"3\">\r\n\t\t\t\t\t<el-select  v-model=\"routeName\" @change=\"routeChange\" placeholder=\"请选择线路\">\r\n\t\t\t\t   \t\t<el-option v-for=\"routeName in routeList\" :key=\"routeName\" :label=\"routeName\" :value=\"routeName\"></el-option>\r\n\t\t\t    \t</el-select>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"4\">\r\n\t\t\t\t\t<el-date-picker\r\n\t\t\t\t\t      v-model=\"workdate\"\r\n\t\t\t\t\t      type=\"month\"\r\n\t\t\t\t\t      value-format=\"yyyy-MM\"\r\n\t\t\t\t\t      placeholder=\"选择月份\">\r\n\t\t\t\t\t</el-date-picker>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"2\">\r\n\t\t\t\t\t<el-button type=\"primary\" size=\"medium\" @click=\"queryPlans\">查询</el-button>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<!--<el-col :span=\"2\">\r\n\t\t\t\t\t<el-button type=\"primary\" size=\"medium\" @click=\"addMileage\">添加里程</el-button>\r\n\t\t\t\t</el-col>-->\r\n\t\t \t</el-row>\r\n\r\n\t\t \t<el-table\r\n\t\t\t    max-height=\"500\"\r\n\t\t\t    size=\"medium\"\r\n\r\n\t\t\t    :data=\"timeTables\"\r\n\t\t\t    align=\"center\"\r\n\t\t\t    highlight-current-row\r\n\t\t\t    style=\"width: 100%\">\r\n\t\t\t     <el-table-column\r\n\t\t\t      type=\"index\"\r\n\t\t\t      width=\"100\">\r\n\t\t\t    </el-table-column>\r\n\t\t\t    <el-table-column\r\n\t\t\t      prop=\"workdate\"\r\n\t\t\t      label=\"时间\"\r\n\t\t\t      width=\"300\">\r\n\t\t\t    </el-table-column>\r\n\t\t\t    <el-table-column\r\n\t\t\t      prop=\"selfNum\"\r\n\t\t\t      label=\"车辆自编号\"\r\n\t\t\t      width=\"200\">\r\n\t\t\t    </el-table-column>\r\n\t\t\t    <el-table-column\r\n\t\t\t      prop=\"plateNum\"\r\n\t\t\t      label=\"车牌号\"\r\n\t\t\t      width=\"200\">\r\n\t\t\t    </el-table-column>\r\n\t\t\t    <el-table-column\r\n\t\t\t      prop=\"totalMileage\"\r\n\t\t\t      label=\"合计里程(公里)\"\r\n\t\t\t      width=\"300\">\r\n\t\t\t    </el-table-column>\r\n\t\t\t    \r\n\t\t \t</el-table>\r\n\t\t</el-row>\r\n\t\t<mileageDialog :showMileageDialog=\"showMileageDialog\" :mileage=\"mileageData\" @closeDialog=\"closeDialog\"></mileageDialog>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport {getRouteMsg,getVehicleMileage,deleteVehicleMileage} from '@/api/gpsApi'\r\n\timport {REQ_SUCCESS,isEnableTiming} from '@/api/APIConstans'\r\n\timport {formatDate} from '@/common/js/dateFmt.js'\r\n\timport mileageDialog from '@/components/mileageDialog'\r\n\texport default{\r\n\t\tname:\"mileageRecord\",\r\n\t\tcomponents:{\r\n\t\t\tmileageDialog\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\trouteList:[],\r\n\t\t\t\trouteName:'',\r\n\t\t\t\tworkdate:'',\r\n\t\t\t\tplateNum:'',\r\n\t\t\t\ttimeTables:[],\r\n\t\t\t\tshowMileageDialog:false,\r\n\t\t\t\tmileageData:{}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t_getRouteLis(){\r\n\t\t\t\tgetRouteMsg().then(resp => {\r\n\t\t\t\t\tif(resp.code == REQ_SUCCESS){\r\n\t\t\t\t\t\tthis.routeList = resp.result;\r\n\t\t\t\t\t\tthis.routeName = this.routeList[0];\r\n\t\t\t\t\t\tthis._getVehicleMileage();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t_getVehicleMileage(){\r\n\t\t\t\tconsole.log(this.workdate)\r\n\t\t\t\tlet param = {\r\n\t\t\t\t\trouteName:this.routeName,\r\n\t\t\t\t\tworkdate:this.workdate\r\n\t\t\t\t}\r\n\t\t\t\tgetVehicleMileage(param).then(resp => {\r\n\t\t\t\t\tif(resp.code == REQ_SUCCESS){\r\n\t\t\t\t\t\tthis.timeTables = resp.result;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\trouteChange(val){\r\n\r\n\t\t\t},\r\n\t\t\taddMileage(){\r\n\t\t\t\tthis.showMileageDialog = true;\r\n\t\t\t},\r\n\t\t\tcloseDialog(flag){\r\n\t\t\t\tthis.showMileageDialog = false;\r\n\t\t\t\tif(flag == \"success\"){\r\n\t\t\t\t\tthis._getVehicleMileage();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tqueryPlans(){\r\n\t\t\t\tthis._getVehicleMileage();\r\n\t\t\t},\r\n\t\t\tdeletePlan(index,timeTables){\r\n\t\t\t\tthis.$confirm('是否删除?', '提示', {\r\n\t\t          confirmButtonText: '确定',\r\n\t\t          cancelButtonText: '取消',\r\n\t\t          type: 'warning'\r\n\t\t        }).then(() => {\r\n\t\t        \tlet params = {\r\n\t\t        \t\tid:timeTables[index].id\r\n\t\t        \t};\r\n\t\t        \tdeleteVehicleMileage(params).then(resp => {\r\n\t\t        \t\tif(resp.code == REQ_SUCCESS){\r\n\t\t        \t\t\tthis._getVehicleMileage();\r\n\t\t\t\t\t\t\tthis.$message.success(\"删除成功\");\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.$message.success(\"删除失败\");\r\n\t\t\t\t\t\t}\r\n\t\t        \t})\r\n\t\t        }).catch(() => {\r\n\r\n\t\t        });\r\n\t\t\t},\r\n\t\t\tmodify(index,timeTables){\r\n\t\t\t\tthis.mileageData = this.timeTables[index];\r\n\t\t\t\tthis.showMileageDialog = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated(){\r\n\t\t\tthis._getRouteLis();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.schedule-wrap{\r\n\t\theight: 99%;\r\n\t\tbackground: #fff;\r\n\t}\r\n\t.schedule-header{\r\n\t\tpadding-top: 10px;\r\n\t\tpadding-left: 20px;\r\n\t}\r\n\t.meta-panel{\r\n\t\tpadding: 20px 10px 0 10px; \r\n\t}\r\n\t.grid-content {\r\n\t\tmargin-top: 10px;\r\n        border-radius: 4px;\r\n  \t}\r\n  \t.schedule-panel {\r\n  \t\tmargin: 15px;\r\n  \t}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/mileageRecord.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"schedule-wrap\"},[_c('el-row',{staticClass:\"schedule-panel\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":3}},[_c('el-select',{attrs:{\"placeholder\":\"请选择线路\"},on:{\"change\":_vm.routeChange},model:{value:(_vm.routeName),callback:function ($$v) {_vm.routeName=$$v},expression:\"routeName\"}},_vm._l((_vm.routeList),function(routeName){return _c('el-option',{key:routeName,attrs:{\"label\":routeName,\"value\":routeName}})}))],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-date-picker',{attrs:{\"type\":\"month\",\"value-format\":\"yyyy-MM\",\"placeholder\":\"选择月份\"},model:{value:(_vm.workdate),callback:function ($$v) {_vm.workdate=$$v},expression:\"workdate\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"medium\"},on:{\"click\":_vm.queryPlans}},[_vm._v(\"查询\")])],1)],1),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"max-height\":\"500\",\"size\":\"medium\",\"data\":_vm.timeTables,\"align\":\"center\",\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"workdate\",\"label\":\"时间\",\"width\":\"300\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"selfNum\",\"label\":\"车辆自编号\",\"width\":\"200\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"plateNum\",\"label\":\"车牌号\",\"width\":\"200\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"totalMileage\",\"label\":\"合计里程(公里)\",\"width\":\"300\"}})],1)],1),_vm._v(\" \"),_c('mileageDialog',{attrs:{\"showMileageDialog\":_vm.showMileageDialog,\"mileage\":_vm.mileageData},on:{\"closeDialog\":_vm.closeDialog}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-bdd19e64\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/mileageRecord.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bdd19e64\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./mileageRecord.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./mileageRecord.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./mileageRecord.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bdd19e64\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./mileageRecord.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-bdd19e64\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/mileageRecord.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}